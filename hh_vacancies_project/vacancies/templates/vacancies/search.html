{% extends 'vacancies/base.html' %}

{% block title %}Поиск вакансий - HH Вакансии{% endblock %}

{% block page_title %}Расширенный поиск вакансий{% endblock %}

{% block breadcrumb_items %}
<li class="breadcrumb-item active">Поиск</li>
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-8">
        <div class="card card-modern">
            <div class="card-header card-header-modern">
                <h5 class="mb-0"><i class="bi bi-search"></i> Параметры поиска</h5>
            </div>
            <div class="card-body">
                <form method="get" action="{% url 'vacancy_list' %}">
                    <div class="row mb-3">
                        <div class="col-md-8">
                            <label class="form-label">Ключевые слова</label>
                            <input type="text" name="q" class="form-control form-control-custom" 
                                   placeholder="Введите профессию, должность или ключевые навыки..."
                                   value="{{ request.GET.q|default:'' }}">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">Регион</label>
                            <select name="area" class="form-select form-control-custom">
                                <option value="">Все регионы</option>
                                <option value="Москва" {% if request.GET.area == 'Москва' %}selected{% endif %}>Москва</option>
                                <option value="Санкт-Петербург" {% if request.GET.area == 'Санкт-Петербург' %}selected{% endif %}>Санкт-Петербург</option>
                                <option value="Новосибирск" {% if request.GET.area == 'Новосибирск' %}selected{% endif %}>Новосибирск</option>
                                <option value="Екатеринбург" {% if request.GET.area == 'Екатеринбург' %}selected{% endif %}>Екатеринбург</option>
                            </select>
                        </div>
                    </div>

                    <div class="row mb-3">
                        <div class="col-md-4">
                            <label class="form-label">Опыт работы</label>
                            <select name="experience" class="form-select form-control-custom">
                                <option value="">Любой опыт</option>
                                <option value="Без опыта" {% if request.GET.experience == 'Без опыта' %}selected{% endif %}>Без опыта</option>
                                <option value="От 1 до 3 лет" {% if request.GET.experience == 'От 1 до 3 лет' %}selected{% endif %}>1-3 года</option>
                                <option value="От 3 до 6 лет" {% if request.GET.experience == 'От 3 до 6 лет' %}selected{% endif %}>3-6 лет</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">Тип занятости</label>
                            <select name="employment" class="form-select form-control-custom">
                                <option value="">Любая занятость</option>
                                <option value="Полная занятость" {% if request.GET.employment == 'Полная занятость' %}selected{% endif %}>Полная</option>
                                <option value="Частичная занятость" {% if request.GET.employment == 'Частичная занятость' %}selected{% endif %}>Частичная</option>
                                <option value="Проектная работа" {% if request.GET.employment == 'Проектная работа' %}selected{% endif %}>Проектная</option>
                            </select>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">Сортировка</label>
                            <select name="sort" class="form-select form-control-custom">
                                <option value="-published_at" {% if request.GET.sort == '-published_at' %}selected{% endif %}>Сначала новые</option>
                                <option value="published_at" {% if request.GET.sort == 'published_at' %}selected{% endif %}>Сначала старые</option>
                                <option value="-salary_from" {% if request.GET.sort == '-salary_from' %}selected{% endif %}>По убыванию зарплаты</option>
                                <option value="salary_from" {% if request.GET.sort == 'salary_from' %}selected{% endif %}>По возрастанию зарплаты</option>
                            </select>
                        </div>
                    </div>

                    <div class="row mb-4">
                        <div class="col-md-6">
                            <label class="form-label">Зарплата от (руб.)</label>
                            <input type="number" name="salary_from" class="form-control form-control-custom" 
                                   value="{{ request.GET.salary_from|default:'' }}" min="0">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Зарплата до (руб.)</label>
                            <input type="number" name="salary_to" class="form-control form-control-custom" 
                                   value="{{ request.GET.salary_to|default:'' }}" min="0">
                        </div>
                    </div>

                    <div class="d-grid">
                        <button type="submit" class="btn btn-custom-primary btn-lg">
                            <i class="bi bi-search"></i> Найти вакансии
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="col-lg-4">
        <!-- Советы по поиску -->
        <div class="card card-modern mb-4">
            <div class="card-header card-header-modern">
                <h5 class="mb-0"><i class="bi bi-lightbulb"></i> Советы по поиску</h5>
            </div>
            <div class="card-body">
                <div class="list-group list-group-flush">
                    <div class="list-group-item border-0 px-0">
                        <h6 class="mb-2"><i class="bi bi-search text-primary me-2"></i>Используйте ключевые слова</h6>
                        <p class="small text-muted mb-0">Указывайте конкретные технологии: "Python Django", "React JavaScript"</p>
                    </div>
                    <div class="list-group-item border-0 px-0">
                        <h6 class="mb-2"><i class="bi bi-filter text-primary me-2"></i>Фильтруйте по опыту</h6>
                        <p class="small text-muted mb-0">Для начинающих выбирайте "Без опыта", для опытных - от 3 лет</p>
                    </div>
                    <div class="list-group-item border-0 px-0">
                        <h6 class="mb-2"><i class="bi bi-cash text-primary me-2"></i>Указывайте зарплату</h6>
                        <p class="small text-muted mb-0">Укажите желаемую зарплату для точного подбора</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Популярные запросы -->
        <div class="card card-modern">
            <div class="card-header card-header-modern">
                <h5 class="mb-0"><i class="bi bi-fire"></i> Популярные запросы</h5>
            </div>
            <div class="card-body">
                <div class="d-flex flex-wrap gap-2">
                    {% for query in ['Python', 'JavaScript', 'Java', 'C#', 'PHP', 'Data Science', 'DevOps', 'Frontend', 'Backend', 'Full Stack'] %}
                    <a href="{% url 'vacancy_list' %}?q={{ query }}" 
                       class="badge bg-light text-dark text-decoration-none hover-lift">
                        {{ query }}
                    </a>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}